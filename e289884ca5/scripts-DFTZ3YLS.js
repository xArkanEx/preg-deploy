function Winwheel(t,e){defaultOptions={canvasId:"canvas",centerX:null,centerY:null,outerRadius:null,innerRadius:0,numSegments:1,drawMode:"code",rotationAngle:0,textFontFamily:"Arial",textFontSize:20,textFontWeight:"bold",textOrientation:"horizontal",textAlignment:"center",textDirection:"normal",textMargin:null,textFillStyle:"black",textStrokeStyle:null,textLineWidth:1,fillStyle:"silver",strokeStyle:"black",lineWidth:1,clearTheCanvas:!0,imageOverlay:!1,drawText:!0,pointerAngle:0,wheelImage:null,imageDirection:"N"};for(var n in defaultOptions)this[n]=t!=null&&typeof t[n]<"u"?t[n]:defaultOptions[n];if(t!=null)for(n in t)typeof this[n]>"u"&&(this[n]=t[n]);for(this.canvasId?(this.canvas=document.getElementById(this.canvasId))?(this.centerX==null&&(this.centerX=this.canvas.width/2),this.centerY==null&&(this.centerY=this.canvas.height/2),this.outerRadius==null&&(this.outerRadius=this.canvas.width<this.canvas.height?this.canvas.width/2-this.lineWidth:this.canvas.height/2-this.lineWidth),this.ctx=this.canvas.getContext("2d")):this.ctx=this.canvas=null:this.ctx=this.cavnas=null,this.segments=Array(null),x=1;x<=this.numSegments;x++)this.segments[x]=t!=null&&t.segments&&typeof t.segments[x-1]<"u"?new Segment(t.segments[x-1]):new Segment;if(this.updateSegmentSizes(),this.textMargin===null&&(this.textMargin=this.textFontSize/1.7),this.animation=t!=null&&t.animation&&typeof t.animation<"u"?new Animation(t.animation):new Animation,t!=null&&t.pins&&typeof t.pins<"u"&&(this.pins=new Pin(t.pins)),this.drawMode=="image"||this.drawMode=="segmentImage"?(typeof t.fillStyle>"u"&&(this.fillStyle=null),typeof t.strokeStyle>"u"&&(this.strokeStyle="red"),typeof t.drawText>"u"&&(this.drawText=!1),typeof t.lineWidth>"u"&&(this.lineWidth=1),typeof e>"u"&&(e=!1)):typeof e>"u"&&(e=!0),this.pointerGuide=t!=null&&t.pointerGuide&&typeof t.pointerGuide<"u"?new PointerGuide(t.pointerGuide):new PointerGuide,e==1)this.draw(this.clearTheCanvas);else if(this.drawMode=="segmentImage")for(winwheelToDrawDuringAnimation=this,winhweelAlreadyDrawn=!1,y=1;y<=this.numSegments;y++)this.segments[y].image!==null&&(this.segments[y].imgData=new Image,this.segments[y].imgData.onload=winwheelLoadedImage,this.segments[y].imgData.src=this.segments[y].image)}Winwheel.prototype.updateSegmentSizes=function(){if(this.segments){var n=0,t=0;for(x=1;x<=this.numSegments;x++)this.segments[x].size!==null&&(n+=this.segments[x].size,t++);var e=360-n,n=0;for(0<e&&(n=e/(this.numSegments-t)),t=0,x=1;x<=this.numSegments;x++)this.segments[x].startAngle=t,t=this.segments[x].size?t+this.segments[x].size:t+n,this.segments[x].endAngle=t}},Winwheel.prototype.clearCanvas=function(){this.ctx&&this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},Winwheel.prototype.draw=function(t){this.ctx&&(typeof t<"u"?t==1&&this.clearCanvas():this.clearCanvas(),this.drawMode=="image"?(this.drawWheelImage(),this.drawText==1&&this.drawSegmentText(),this.imageOverlay==1&&this.drawSegments()):this.drawMode=="segmentImage"?(this.drawSegmentImages(),this.drawText==1&&this.drawSegmentText(),this.imageOverlay==1&&this.drawSegments()):(this.drawSegments(),this.drawText==1&&this.drawSegmentText()),typeof this.pins<"u"&&this.pins.visible==1&&this.drawPins(),this.pointerGuide.display==1&&this.drawPointerGuide())},Winwheel.prototype.drawPins=function(){if(this.pins&&this.pins.number){var t=360/this.pins.number;for(i=1;i<=this.pins.number;i++)this.ctx.save(),this.ctx.strokeStyle=this.pins.strokeStyle,this.ctx.lineWidth=this.pins.lineWidth,this.ctx.fillStyle=this.pins.fillStyle,this.ctx.translate(this.centerX,this.centerY),this.ctx.rotate(this.degToRad(i*t+this.rotationAngle)),this.ctx.translate(-this.centerX,-this.centerY),this.ctx.beginPath(),this.ctx.arc(this.centerX,this.centerY-this.outerRadius+this.pins.outerRadius+this.pins.margin,this.pins.outerRadius,0,2*Math.PI),this.pins.fillStyle&&this.ctx.fill(),this.pins.strokeStyle&&this.ctx.stroke(),this.ctx.restore()}},Winwheel.prototype.drawPointerGuide=function(){this.ctx&&(this.ctx.save(),this.ctx.translate(this.centerX,this.centerY),this.ctx.rotate(this.degToRad(this.pointerAngle)),this.ctx.translate(-this.centerX,-this.centerY),this.ctx.strokeStyle=this.pointerGuide.strokeStyle,this.ctx.lineWidth=this.pointerGuide.lineWidth,this.ctx.beginPath(),this.ctx.moveTo(this.centerX,this.centerY),this.ctx.lineTo(this.centerX,-(this.outerRadius/4)),this.ctx.stroke(),this.ctx.restore())},Winwheel.prototype.drawWheelImage=function(){if(this.wheelImage!=null){var t=this.centerX-this.wheelImage.height/2,e=this.centerY-this.wheelImage.width/2;this.ctx.save(),this.ctx.translate(this.centerX,this.centerY),this.ctx.rotate(this.degToRad(this.rotationAngle)),this.ctx.translate(-this.centerX,-this.centerY),this.ctx.drawImage(this.wheelImage,t,e),this.ctx.restore()}},Winwheel.prototype.drawSegmentImages=function(){if(this.ctx&&this.segments)for(x=1;x<=this.numSegments;x++)if(seg=this.segments[x],seg.imgData.height){var t,e,n;t=seg.imageDirection!==null?seg.imageDirection:this.imageDirection,t=="S"?(t=this.centerX-seg.imgData.width/2,e=this.centerY,n=seg.startAngle+180+(seg.endAngle-seg.startAngle)/2):t=="E"?(t=this.centerX,e=this.centerY-seg.imgData.height/2,n=seg.startAngle+270+(seg.endAngle-seg.startAngle)/2):t=="W"?(t=this.centerX-seg.imgData.width,e=this.centerY-seg.imgData.height/2,n=seg.startAngle+90+(seg.endAngle-seg.startAngle)/2):(t=this.centerX-seg.imgData.width/2,e=this.centerY-seg.imgData.height,n=seg.startAngle+(seg.endAngle-seg.startAngle)/2),this.ctx.save(),this.ctx.translate(this.centerX,this.centerY),this.ctx.rotate(this.degToRad(this.rotationAngle+n)),this.ctx.translate(-this.centerX,-this.centerY),this.ctx.drawImage(seg.imgData,t,e),this.ctx.restore()}else console.log("Segment "+x+" imgData is not loaded")},Winwheel.prototype.drawSegments=function(){if(this.ctx&&this.segments)for(x=1;x<=this.numSegments;x++){seg=this.segments[x];var t,e;t=seg.fillStyle!==null?seg.fillStyle:this.fillStyle,this.ctx.fillStyle=t,this.ctx.lineWidth=seg.lineWidth!==null?seg.lineWidth:this.lineWidth,e=seg.strokeStyle!==null?seg.strokeStyle:this.strokeStyle,((this.ctx.strokeStyle=e)||t)&&(this.ctx.beginPath(),this.innerRadius||this.ctx.moveTo(this.centerX,this.centerY),this.ctx.arc(this.centerX,this.centerY,this.outerRadius,this.degToRad(seg.startAngle+this.rotationAngle-90),this.degToRad(seg.endAngle+this.rotationAngle-90),!1),this.innerRadius?this.ctx.arc(this.centerX,this.centerY,this.innerRadius,this.degToRad(seg.endAngle+this.rotationAngle-90),this.degToRad(seg.startAngle+this.rotationAngle-90),!0):this.ctx.lineTo(this.centerX,this.centerY),t&&this.ctx.fill(),e&&this.ctx.stroke())}},Winwheel.prototype.drawSegmentText=function(){if(this.ctx){var t,e,n,g,r,p,o,h,u,s,l;for(x=1;x<=this.numSegments;x++){if(this.ctx.save(),seg=this.segments[x],seg.text)for(t=seg.textFontFamily!==null?seg.textFontFamily:this.textFontFamily,e=seg.textFontSize!==null?seg.textFontSize:this.textFontSize,n=seg.textFontWeight!==null?seg.textFontWeight:this.textFontWeight,g=seg.textOrientation!==null?seg.textOrientation:this.textOrientation,r=seg.textAlignment!==null?seg.textAlignment:this.textAlignment,p=seg.textDirection!==null?seg.textDirection:this.textDirection,o=seg.textMargin!==null?seg.textMargin:this.textMargin,h=seg.textFillStyle!==null?seg.textFillStyle:this.textFillStyle,u=seg.textStrokeStyle!==null?seg.textStrokeStyle:this.textStrokeStyle,s=seg.textLineWidth!==null?seg.textLineWidth:this.textLineWidth,l="",n!=null&&(l+=n+" "),e!=null&&(l+=e+"px "),t!=null&&(l+=t),this.ctx.font=l,this.ctx.fillStyle=h,this.ctx.strokeStyle=u,this.ctx.lineWidth=s,t=seg.text.split(`
`),n=0-t.length/2*e+e/2,g!="curved"||r!="inner"&&r!="outer"||(n=0),i=0;i<t.length;i++){if(p=="reversed"){if(g=="horizontal")this.ctx.textAlign=r=="inner"?"right":r=="outer"?"left":"center",this.ctx.textBaseline="middle",s=this.degToRad(seg.endAngle-(seg.endAngle-seg.startAngle)/2+this.rotationAngle-90-180),this.ctx.save(),this.ctx.translate(this.centerX,this.centerY),this.ctx.rotate(s),this.ctx.translate(-this.centerX,-this.centerY),r=="inner"?(h&&this.ctx.fillText(t[i],this.centerX-this.innerRadius-o,this.centerY+n),u&&this.ctx.strokeText(t[i],this.centerX-this.innerRadius-o,this.centerY+n)):r=="outer"?(h&&this.ctx.fillText(t[i],this.centerX-this.outerRadius+o,this.centerY+n),u&&this.ctx.strokeText(t[i],this.centerX-this.outerRadius+o,this.centerY+n)):(h&&this.ctx.fillText(t[i],this.centerX-this.innerRadius-(this.outerRadius-this.innerRadius)/2-o,this.centerY+n),u&&this.ctx.strokeText(t[i],this.centerX-this.innerRadius-(this.outerRadius-this.innerRadius)/2-o,this.centerY+n)),this.ctx.restore();else if(g=="vertical"){if(this.ctx.textAlign="center",this.ctx.textBaseline=r=="inner"?"top":r=="outer"?"bottom":"middle",s=seg.endAngle-(seg.endAngle-seg.startAngle)/2-180,s+=this.rotationAngle,this.ctx.save(),this.ctx.translate(this.centerX,this.centerY),this.ctx.rotate(this.degToRad(s)),this.ctx.translate(-this.centerX,-this.centerY),r=="outer")var c=this.centerY+this.outerRadius-o;else r=="inner"&&(c=this.centerY+this.innerRadius+o);if(l=e-e/9,r=="outer")for(s=t[i].length-1;0<=s;s--)character=t[i].charAt(s),h&&this.ctx.fillText(character,this.centerX+n,c),u&&this.ctx.strokeText(character,this.centerX+n,c),c-=l;else if(r=="inner")for(s=0;s<t[i].length;s++)character=t[i].charAt(s),h&&this.ctx.fillText(character,this.centerX+n,c),u&&this.ctx.strokeText(character,this.centerX+n,c),c+=l;else if(r=="center")for(c=0,1<t[i].length&&(c=l*(t[i].length-1)/2),c=this.centerY+this.innerRadius+(this.outerRadius-this.innerRadius)/2+c+o,s=t[i].length-1;0<=s;s--)character=t[i].charAt(s),h&&this.ctx.fillText(character,this.centerX+n,c),u&&this.ctx.strokeText(character,this.centerX+n,c),c-=l;this.ctx.restore()}else if(g=="curved"){l=0,r=="inner"?(l=this.innerRadius+o,this.ctx.textBaseline="top"):r=="outer"?(l=this.outerRadius-o,this.ctx.textBaseline="bottom",l-=e*(t.length-1)):r=="center"&&(l=this.innerRadius+o+(this.outerRadius-this.innerRadius)/2,this.ctx.textBaseline="middle");var d=0,m;for(1<t[i].length?(this.ctx.textAlign="left",d=e/10*4,radiusPercent=100/l,d*=radiusPercent,totalArc=d*t[i].length,m=seg.startAngle+((seg.endAngle-seg.startAngle)/2-totalArc/2)):(m=seg.startAngle+(seg.endAngle-seg.startAngle)/2,this.ctx.textAlign="center"),m+=this.rotationAngle,m-=180,s=t[i].length;0<=s;s--)this.ctx.save(),character=t[i].charAt(s),this.ctx.translate(this.centerX,this.centerY),this.ctx.rotate(this.degToRad(m)),this.ctx.translate(-this.centerX,-this.centerY),u&&this.ctx.strokeText(character,this.centerX,this.centerY+l+n),h&&this.ctx.fillText(character,this.centerX,this.centerY+l+n),m+=d,this.ctx.restore()}}else if(g=="horizontal")this.ctx.textAlign=r=="inner"?"left":r=="outer"?"right":"center",this.ctx.textBaseline="middle",s=this.degToRad(seg.endAngle-(seg.endAngle-seg.startAngle)/2+this.rotationAngle-90),this.ctx.save(),this.ctx.translate(this.centerX,this.centerY),this.ctx.rotate(s),this.ctx.translate(-this.centerX,-this.centerY),r=="inner"?(h&&this.ctx.fillText(t[i],this.centerX+this.innerRadius+o,this.centerY+n),u&&this.ctx.strokeText(t[i],this.centerX+this.innerRadius+o,this.centerY+n)):r=="outer"?(h&&this.ctx.fillText(t[i],this.centerX+this.outerRadius-o,this.centerY+n),u&&this.ctx.strokeText(t[i],this.centerX+this.outerRadius-o,this.centerY+n)):(h&&this.ctx.fillText(t[i],this.centerX+this.innerRadius+(this.outerRadius-this.innerRadius)/2+o,this.centerY+n),u&&this.ctx.strokeText(t[i],this.centerX+this.innerRadius+(this.outerRadius-this.innerRadius)/2+o,this.centerY+n)),this.ctx.restore();else if(g=="vertical"){if(this.ctx.textAlign="center",this.ctx.textBaseline=r=="inner"?"bottom":r=="outer"?"top":"middle",s=seg.endAngle-(seg.endAngle-seg.startAngle)/2,s+=this.rotationAngle,this.ctx.save(),this.ctx.translate(this.centerX,this.centerY),this.ctx.rotate(this.degToRad(s)),this.ctx.translate(-this.centerX,-this.centerY),r=="outer"?c=this.centerY-this.outerRadius+o:r=="inner"&&(c=this.centerY-this.innerRadius-o),l=e-e/9,r=="outer")for(s=0;s<t[i].length;s++)character=t[i].charAt(s),h&&this.ctx.fillText(character,this.centerX+n,c),u&&this.ctx.strokeText(character,this.centerX+n,c),c+=l;else if(r=="inner")for(s=t[i].length-1;0<=s;s--)character=t[i].charAt(s),h&&this.ctx.fillText(character,this.centerX+n,c),u&&this.ctx.strokeText(character,this.centerX+n,c),c-=l;else if(r=="center")for(c=0,1<t[i].length&&(c=l*(t[i].length-1)/2),c=this.centerY-this.innerRadius-(this.outerRadius-this.innerRadius)/2-c-o,s=0;s<t[i].length;s++)character=t[i].charAt(s),h&&this.ctx.fillText(character,this.centerX+n,c),u&&this.ctx.strokeText(character,this.centerX+n,c),c+=l;this.ctx.restore()}else if(g=="curved")for(l=0,r=="inner"?(l=this.innerRadius+o,this.ctx.textBaseline="bottom",l+=e*(t.length-1)):r=="outer"?(l=this.outerRadius-o,this.ctx.textBaseline="top"):r=="center"&&(l=this.innerRadius+o+(this.outerRadius-this.innerRadius)/2,this.ctx.textBaseline="middle"),d=0,1<t[i].length?(this.ctx.textAlign="left",d=e/10*4,radiusPercent=100/l,d*=radiusPercent,totalArc=d*t[i].length,m=seg.startAngle+((seg.endAngle-seg.startAngle)/2-totalArc/2)):(m=seg.startAngle+(seg.endAngle-seg.startAngle)/2,this.ctx.textAlign="center"),m+=this.rotationAngle,s=0;s<t[i].length;s++)this.ctx.save(),character=t[i].charAt(s),this.ctx.translate(this.centerX,this.centerY),this.ctx.rotate(this.degToRad(m)),this.ctx.translate(-this.centerX,-this.centerY),u&&this.ctx.strokeText(character,this.centerX,this.centerY-l+n),h&&this.ctx.fillText(character,this.centerX,this.centerY-l+n),m+=d,this.ctx.restore();n+=e}this.ctx.restore()}}},Winwheel.prototype.degToRad=function(t){return .017453292519943295*t},Winwheel.prototype.setCenter=function(t,e){this.centerX=t,this.centerY=e},Winwheel.prototype.addSegment=function(t,e){newSegment=new Segment(t),this.numSegments++;var n;if(typeof e<"u"){for(n=this.numSegments;n>e;n--)this.segments[n]=this.segments[n-1];this.segments[e]=newSegment,n=e}else this.segments[this.numSegments]=newSegment,n=this.numSegments;return this.updateSegmentSizes(),this.segments[n]},Winwheel.prototype.setCanvasId=function(t){t?(this.canvasId=t,(this.canvas=document.getElementById(this.canvasId))&&(this.ctx=this.canvas.getContext("2d"))):this.canvas=this.ctx=this.canvasId=null},Winwheel.prototype.deleteSegment=function(t){if(1<this.numSegments){if(typeof t<"u")for(;t<this.numSegments;t++)this.segments[t]=this.segments[t+1];this.segments[this.numSegments]=void 0,this.numSegments--,this.updateSegmentSizes()}},Winwheel.prototype.windowToCanvas=function(t,e){var n=this.canvas.getBoundingClientRect();return{x:Math.floor(t-this.canvas.width/n.width*n.left),y:Math.floor(e-this.canvas.height/n.height*n.top)}},Winwheel.prototype.getSegmentAt=function(t,e){var n=null,g=this.getSegmentNumberAt(t,e);return g!==null&&(n=this.segments[g]),n},Winwheel.prototype.getSegmentNumberAt=function(t,e){var h=this.windowToCanvas(t,e),n,g,r,p;h.x>this.centerX?(r=h.x-this.centerX,g="R"):(r=this.centerX-h.x,g="L"),h.y>this.centerY?(p=h.y-this.centerY,n="B"):(p=this.centerY-h.y,n="T");var o=180*Math.atan(p/r)/Math.PI,h=0;for(r=Math.sqrt(p*p+r*r),n=="T"&&g=="R"?h=Math.round(90-o):n=="B"&&g=="R"?h=Math.round(o+90):n=="B"&&g=="L"?h=Math.round(90-o+180):n=="T"&&g=="L"&&(h=Math.round(o+270)),this.rotationAngle!=0&&(g=this.getRotationPosition(),h-=g,0>h&&(h=360-Math.abs(h))),g=null,t=1;t<=this.numSegments;t++)if(h>=this.segments[t].startAngle&&h<=this.segments[t].endAngle&&r>=this.innerRadius&&r<=this.outerRadius){g=t;break}return g},Winwheel.prototype.getIndicatedSegment=function(){var t=this.getIndicatedSegmentNumber();return this.segments[t]},Winwheel.prototype.getIndicatedSegmentNumber=function(){var t=0,e=this.getRotationPosition(),e=Math.floor(this.pointerAngle-e);for(0>e&&(e=360-Math.abs(e)),x=1;x<this.segments.length;x++)if(e>=this.segments[x].startAngle&&e<=this.segments[x].endAngle){t=x;break}return t},Winwheel.prototype.getRotationPosition=function(){var t=this.rotationAngle;if(0<=t){if(360<t)var e=Math.floor(t/360),t=t-360*e}else-360>t&&(e=Math.ceil(t/360),t-=360*e),t=360+t;return t},Winwheel.prototype.startAnimation=function(){if(this.animation){this.computeAnimation(),winwheelToDrawDuringAnimation=this;var t=Array(null);t[this.animation.propertyName]=this.animation.propertyValue,t.yoyo=this.animation.yoyo,t.repeat=this.animation.repeat,t.ease=this.animation.easing,t.onUpdate=winwheelAnimationLoop,t.onComplete=winwheelStopAnimation,this.tween=TweenMax.to(this,this.animation.duration,t)}},Winwheel.prototype.stopAnimation=function(t){winwheelToDrawDuringAnimation&&(winwheelToDrawDuringAnimation.tween.kill(),winwheelStopAnimation(t)),winwheelToDrawDuringAnimation=this},Winwheel.prototype.pauseAnimation=function(){this.tween&&this.tween.pause()},Winwheel.prototype.resumeAnimation=function(){this.tween&&this.tween.play()},Winwheel.prototype.computeAnimation=function(){this.animation&&(this.animation.type=="spinOngoing"?(this.animation.propertyName="rotationAngle",this.animation.spins==null&&(this.animation.spins=5),this.animation.repeat==null&&(this.animation.repeat=-1),this.animation.easing==null&&(this.animation.easing="Linear.easeNone"),this.animation.yoyo==null&&(this.animation.yoyo=!1),this.animation.propertyValue=360*this.animation.spins,this.animation.direction=="anti-clockwise"&&(this.animation.propertyValue=0-this.animation.propertyValue)):this.animation.type=="spinToStop"?(this.animation.propertyName="rotationAngle",this.animation.spins==null&&(this.animation.spins=5),this.animation.repeat==null&&(this.animation.repeat=0),this.animation.easing==null&&(this.animation.easing="Power4.easeOut"),this.animation._stopAngle=this.animation.stopAngle==null?Math.floor(359*Math.random()):360-this.animation.stopAngle+this.pointerAngle,this.animation.yoyo==null&&(this.animation.yoyo=!1),this.animation.propertyValue=360*this.animation.spins,this.animation.direction=="anti-clockwise"?(this.animation.propertyValue=0-this.animation.propertyValue,this.animation.propertyValue-=360-this.animation._stopAngle):this.animation.propertyValue+=this.animation._stopAngle):this.animation.type=="spinAndBack"&&(this.animation.propertyName="rotationAngle",this.animation.spins==null&&(this.animation.spins=5),this.animation.repeat==null&&(this.animation.repeat=1),this.animation.easing==null&&(this.animation.easing="Power2.easeInOut"),this.animation.yoyo==null&&(this.animation.yoyo=!0),this.animation._stopAngle=this.animation.stopAngle==null?0:360-this.animation.stopAngle,this.animation.propertyValue=360*this.animation.spins,this.animation.direction=="anti-clockwise"?(this.animation.propertyValue=0-this.animation.propertyValue,this.animation.propertyValue-=360-this.animation._stopAngle):this.animation.propertyValue+=this.animation._stopAngle))},Winwheel.prototype.getRandomForSegment=function(t){var e=0;if(t)if(typeof this.segments[t]<"u"){var n=this.segments[t].startAngle;t=this.segments[t].endAngle-n-2,0<t?e=n+1+Math.floor(Math.random()*t):console.log("Segment size is too small to safely get random angle inside it")}else console.log("Segment "+t+" undefined");else console.log("Segment number not specified");return e};function Pin(t){defaultOptions={visible:!0,number:36,outerRadius:3,fillStyle:"grey",strokeStyle:"black",lineWidth:1,margin:3};for(var e in defaultOptions)this[e]=t!=null&&typeof t[e]<"u"?t[e]:defaultOptions[e];if(t!=null)for(e in t)typeof this[e]>"u"&&(this[e]=t[e])}function Animation(t){defaultOptions={type:"spinOngoing",direction:"clockwise",propertyName:null,propertyValue:null,duration:10,yoyo:!1,repeat:0,easing:"power3.easeOut",stopAngle:null,spins:null,clearTheCanvas:null,callbackFinished:null,callbackBefore:null,callbackAfter:null};for(var e in defaultOptions)this[e]=t!=null&&typeof t[e]<"u"?t[e]:defaultOptions[e];if(t!=null)for(e in t)typeof this[e]>"u"&&(this[e]=t[e])}function Segment(t){defaultOptions={size:null,text:"",fillStyle:null,strokeStyle:null,lineWidth:null,textFontFamily:null,textFontSize:null,textFontWeight:null,textOrientation:null,textAlignment:null,textDirection:null,textMargin:null,textFillStyle:null,textStrokeStyle:null,textLineWidth:null,image:null,imageDirection:null,imgData:null};for(var e in defaultOptions)this[e]=t!=null&&typeof t[e]<"u"?t[e]:defaultOptions[e];if(t!=null)for(e in t)typeof this[e]>"u"&&(this[e]=t[e]);this.endAngle=this.startAngle=0}Segment.prototype.changeImage=function(t,e){this.image=t,this.imgData=null,e&&(this.imageDirection=e),winhweelAlreadyDrawn=!1,this.imgData=new Image,this.imgData.onload=winwheelLoadedImage,this.imgData.src=this.image};function PointerGuide(t){defaultOptions={display:!1,strokeStyle:"red",lineWidth:3};for(var e in defaultOptions)this[e]=t!=null&&typeof t[e]<"u"?t[e]:defaultOptions[e]}function winwheelPercentToDegrees(t){var e=0;return 0<t&&100>=t&&(e=t/100*360),e}function winwheelAnimationLoop(){winwheelToDrawDuringAnimation&&(winwheelToDrawDuringAnimation.animation.clearTheCanvas!=0&&winwheelToDrawDuringAnimation.ctx.clearRect(0,0,winwheelToDrawDuringAnimation.canvas.width,winwheelToDrawDuringAnimation.canvas.height),winwheelToDrawDuringAnimation.animation.callbackBefore!=null&&eval(winwheelToDrawDuringAnimation.animation.callbackBefore),winwheelToDrawDuringAnimation.draw(!1),winwheelToDrawDuringAnimation.animation.callbackAfter!=null&&eval(winwheelToDrawDuringAnimation.animation.callbackAfter))}var winwheelToDrawDuringAnimation=null;function winwheelStopAnimation(a){a!=0&&winwheelToDrawDuringAnimation.animation.callbackFinished!=null&&eval(winwheelToDrawDuringAnimation.animation.callbackFinished)}var winhweelAlreadyDrawn=!1;function winwheelLoadedImage(){if(winhweelAlreadyDrawn==0){var t=0;for(i=1;i<=winwheelToDrawDuringAnimation.numSegments;i++)winwheelToDrawDuringAnimation.segments[i].imgData!=null&&winwheelToDrawDuringAnimation.segments[i].imgData.height&&t++;t==winwheelToDrawDuringAnimation.numSegments&&(winhweelAlreadyDrawn=!0,winwheelToDrawDuringAnimation.draw())}}
